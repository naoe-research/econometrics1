# Two-Way Fixed Effects and Differences-in-Differences with Heterogeneous Treatment Effects: A Survey

## 1. 研究の背景
政策の効果を推定するために、二重固定効果（Two-Way Fixed Effects, TWFE）を用いた回帰分析は非常に一般的である。
実際、2015年から2019年の間に「American Economic Review」で最も引用された100本の論文のうち、26本がこの手法を利用していた。
しかし、近年の研究で「TWFE回帰は、政策効果がグループや時間によって異なる場合、誤った推定結果を生じる可能性がある」ことが指摘されている。

<br>
<br>
<br>
<br>


## 2. TWFEとDIDの基本概念
### (1) 差分の差（DID）の考え方
DIDは「政策を受けたグループ（処置群）」と「政策を受けなかったグループ（対照群）」の間で、時間の経過による変化を比較する手法。

#### 前提条件（並行トレンド仮定）:
政策がなかった場合、両グループのアウトカム（結果変数）の推移は同じである。

#### 数式表現:
$$
DID = (Y_{s,2} - Y_{s,1}) - (Y_{n,2} - Y_{n,1})
$$

- $Y_{s,t}$: 処置群の時点 $t$ での結果
- $Y_{n,t}$: 対照群の時点 $t$ での結果

### (2) 二重固定効果（TWFE）
TWFEはグループ固定効果と時点固定効果を用いた回帰分析手法。

#### グループ固定効果（Group Fixed Effect）
グループごとの不変な特徴をコントロール。

#### 時点固定効果（Time Fixed Effect）
各時点の共通の変動をコントロール。

#### 回帰式
$$
Y_{g,t} = \alpha_g + \gamma_t + \beta D_{g,t} + \epsilon_{g,t}
$$

- $Y_{g,t}$: グループ $g$ の時点 $t$ での結果
- $D_{g,t}$: その時の処置変数



<br>
<br>


## 3. 問題点（TWFEの限界）
### (1) 異質な処置効果があるとバイアスが生じる
TWFEは「政策効果がすべてのグループと時点で一定である」と仮定しているが、実際には効果がグループや時間によって異なることが多い。
例: 最低賃金の引き上げが「教育レベルの高い地域」と「低い地域」で異なる影響を持つ可能性。

### (2) ネガティブウェイトの問題
TWFEは「政策の影響を受けたグループ」と「受けていないグループ」の変化を比較するが、この比較には**負の重み（ネガティブウェイト）**が含まれる可能性がある。
例: ある地域では最低賃金の上昇によって雇用が減少し、別の地域では増加する場合、統計的な処理の結果、雇用が全体的に増えたと誤認する可能性。

### (3) スイッチング・グループの影響
政策を受けるタイミングが異なるグループを用いた場合、処置群の中に「早く受けたグループ」と「遅く受けたグループ」が存在し、これらのグループ間の不適切な比較が生じることがある。

特に「遅く受けたグループ」を対照群として扱うと、政策の本来の影響が過小評価または過大評価されるリスクがある。








## 4. 代替手法（異質な処置効果に対処する方法）
この論文では、近年の研究を整理し、異質な処置効果に対処できる代替推定手法を紹介している。

